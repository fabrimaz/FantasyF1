<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fantasy F1 — Pole Position</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<nav id="nav" style="display:none">
  <div class="nav-logo">FANTASY <span>F1</span></div>
  <div class="nav-tabs">
    <button class="nav-tab active" onclick="goTo('team')">Team</button>
    <button class="nav-tab" onclick="goTo('leagues')">Leagues</button>
    <button class="nav-tab" id="nav-admin-tab" onclick="goTo('admin')" style="display:none">Gestione</button>
  </div>
  <div class="nav-right">
    <button class="rules-btn" title="Rules" onclick="showRules()">i</button>
    <span class="nav-user" id="nav-username"></span>
    <button class="btn-logout" onclick="logout()">Logout</button>
  </div>
</nav>

<!-- ════════════════════════════════════════════════════════════════════════  
     LOGIN SCREEN
     ════════════════════════════════════════════════════════════════════════ -->
<div class="screen active" id="screen-login">
  <main>
    <div class="login-box">
      <div class="login-hero">
        <div class="login-stripes">
          <div class="login-stripe" style="width:50px;background:var(--red)"></div>
          <div class="login-stripe" style="width:24px;background:var(--gold)"></div>
          <div class="login-stripe" style="width:14px;background:#27F4D2"></div>
        </div>
        <div class="login-logo">FANTASY <span>F1</span></div>
        <div class="login-tagline">Pole Position · Season 2026</div>
      </div>
      <div class="card login-card">
        <div class="login-tabs">
          <button class="login-tab active" id="tab-login" onclick="switchMode('login')">Login</button>
          <button class="login-tab" id="tab-register" onclick="switchMode('register')">Register</button>
        </div>
        <div id="login-error" class="login-error" style="display:none"></div>
        <div id="field-username" class="form-group" style="display:none">
          <label class="form-label">Username</label>
          <input class="form-input" id="inp-username" placeholder="il_tuo_nickname" />
        </div>
        <div class="form-group">
          <label class="form-label">Email</label>
          <input class="form-input" id="inp-email" type="email" placeholder="tu@example.com" value="demo@f1.com" />
        </div>
        <div class="form-group">
          <label class="form-label">Password</label>
          <input class="form-input" id="inp-password" type="password" placeholder="••••••••" value="demo123"
            onkeydown="if(event.key==='Enter') doAuth()" />
        </div>
        <button class="btn btn-primary btn-full" id="auth-btn" onclick="doAuth()">→ To the track</button>
        <div class="login-hint">Demo: demo@f1.com · demo123</div>
      </div>
    </div>
  </main>
</div>

<!-- TEAM BUILDER -->
<div class="screen" id="screen-team">
  <main>
    <div class="page-title">Build your <span>Team</span></div>
    <div class="page-sub">Select 5 drivers and 2 constructors · Budget $100M per GP</div>
    
    <div class="card" style="margin-bottom:16px;padding:12px">
      <label class="form-label">Choose the Grand Prix</label>
      <select id="gp-selector" class="form-input" onchange="changeGP(this.value)" style="cursor:pointer"></select>
    </div>
    
    <div class="card budget-bar">
      <div>
        <div class="budget-label">Budget left</div>
        <div class="budget-num" id="budget-left">$100.0M</div>
      </div>
      <div class="budget-track"><div class="budget-fill" id="budget-fill" style="width:100%"></div></div>
      <div style="text-align:right">
        <div class="budget-label">Spent</div>
        <div style="font-size:18px;font-weight:900;color:var(--muted)" id="budget-spent">$0.0M</div>
      </div>
    </div>
    <div class="tb-layout">
      <div>
        <div class="section-label">Drivers <span id="driver-count" style="color:var(--text)">0/5</span></div>
        <div class="drivers-grid" id="drivers-grid"></div>
        <div class="section-label">Constructors <span id="constr-count" style="color:var(--text)">0/2</span></div>
        <div class="constructors-grid" id="constructors-grid"></div>
      </div>
      <div class="my-team">
        <div class="card">
          <div class="my-team-title">My Team</div>
          <div class="my-team-sub" id="team-status">Select drivers and constructors</div>
          <div class="section-label" style="margin-bottom:10px">Drivers</div>
          <div id="driver-slots"></div>
          <div class="section-label" style="margin-top:14px;margin-bottom:10px">Constructors</div>
          <div id="constr-slots"></div>
          <button class="btn btn-primary btn-full" style="margin-top:16px"
            id="save-btn" onclick="saveTeam()" disabled>Save Team →</button>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- LEAGUES -->
<div class="screen" id="screen-leagues">
  <main>
    <div class="page-title">Leagues & <span>Leaderboards</span></div>
    <div class="page-sub">Join a league with a code or select your own</div>
    <div class="league-layout">
      <div>
        <div class="card join-card">
          <div class="join-title">Join a League</div>
          <div class="form-group" style="margin-bottom:12px">
            <label class="form-label">League Code</label>
            <input class="form-input" id="inp-code" placeholder="e.g. POLE24"
              style="text-transform:uppercase;letter-spacing:3px"
              oninput="this.value=this.value.toUpperCase()"
              onkeydown="if(event.key==='Enter') joinLeague()" />
          </div>
          <button class="btn btn-primary btn-full" onclick="joinLeague()">→ Join</button>
          <div class="hint-codes">Try: FERRARI · AMICI01</div>
        </div>
        <div class="section-label">My Leagues</div>
        <div id="my-leagues-list"></div>
      </div>
      <div>
        <div class="lb-top">
          <div>
            <div class="lb-title" id="lb-name">—</div>
            <div class="lb-round" id="lb-round">—</div>
          </div>
          <span class="badge badge-red" id="lb-members">—</span>
        </div>
        <div class="card" style="margin-bottom:16px;padding:12px">
          <label class="form-label">Choose the Grand Prix</label>
          <select id="gp-selector-league" class="form-input" onchange="changeLeagueGP(this.value)" style="cursor:pointer"></select>
        </div>
        <div class="card" style="overflow:hidden">
          <table class="lb-table">
            <thead><tr><th>#</th><th>Manager</th><th>Points</th><th>Δ</th></tr></thead>
            <tbody id="lb-body"></tbody>
          </table>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- RULES PANEL -->
<div id="screen-rules" class="screen">
  <div class="information-container">
      <div class="nav-logo">FANTASY <span>F1</span></div>
      <ul id="rules-list" class="rules-list"></ul>
      <div id="points-table-container"></div>
      <button  class="btn btn-primary btn-full" onclick="goTo('team')">Back to the Team</button>
  </div>
</div>

<!-- ADMIN PANEL -->
<div class="screen" id="screen-admin">
  <main>
    <div class="page-title">Gestione <span>Gioco</span></div>
    <div class="page-sub">Controlla la data fittizia e altre impostazioni</div>
    
    <div class="card" style="max-width:500px;margin-top:20px">
      <div class="section-label">Data Gioco Attuale</div>
      <div style="display:flex;gap:12px;margin-bottom:16px;align-items:flex-end">
        <div style="flex:1">
          <label class="form-label">Data e Ora</label>
          <input class="form-input" id="gamestate-date" type="datetime-local" />
        </div>
        <button class="btn btn-primary" onclick="updateGameDate()">Aggiorna</button>
        <button class="btn" onclick="resetGameDate()" style="background:var(--muted);color:var(--text)">Reset</button>
      </div>
      <div style="padding:12px;background:rgba(255,255,255,0.05);border-radius:6px;font-size:12px;color:var(--muted)">
        La data fittizia viene utilizzata per determinare lo stato dei Grand Prix
      </div>
    </div>
  </main>
</div>

<script src="app.js"></script>
</body>
</html>
